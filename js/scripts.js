"use strict";var movieGallery=document.querySelector("#js-moviesList"),searchField=document.querySelector("#js-form"),moviesList=document.querySelector("#js-moviesList"),detailsPage=document.querySelector("#js-detailsPage"),homePage=document.querySelector("#js-homePage"),detailsPreviewImg=document.querySelector("#js-previewImg"),detailsTitle=document.querySelector(".details-title"),detailsDescription=document.querySelector(".details-text"),detailsPopularuty=document.querySelector("#details-popularity"),detailsGenre=document.querySelector("#details-genre"),detailsOriginalTitle=document.querySelector("details-originalTitle"),apiKey="5f4a8cd7bcedd7efa785bad615b94f98",inputValue="",pageNumber=1,renderedMovies=[];function createMarkup(){addPreloader(),fetchFilms().then(function(e){return moviesList.innerHTML="",e.results.forEach(function(e){moviesList.insertAdjacentHTML("beforeend",createCard(e.poster_path,e.title,e.id,e.release_date))}),removePreloader(),renderedMovies=e.results})}function createStartupMarkup(){fetchPopularFilms().then(function(e){return console.log(e),moviesList.innerHTML="",e.results.forEach(function(e){moviesList.insertAdjacentHTML("beforeend",createCard(e.poster_path,e.title,e.id,e.release_date))}),renderedMovies=e.results})}function createCard(e,t,i,r){var a=document.createElement("li");a.classList.add("main__movieItem"),a.setAttribute("id","js-movieItem");var n=document.createElement("img");n.classList.add("main__previewImgItem"),e?n.setAttribute("src","https://image.tmdb.org/t/p/w500/".concat(e)):n.setAttribute("src","../images/plug.jpg");var o=document.createElement("h2");o.classList.add("main__previewImgTitle"),n.setAttribute("data-id",i),n.setAttribute("id","js-image");var s=new Date(r).getFullYear();return Number.isNaN(s)?o.textContent=t:o.textContent="".concat(t," (").concat(s,")"),a.append(n,o),a.outerHTML}function fetchFilms(){return fetch("https://api.themoviedb.org/3/search/movie?api_key=".concat(apiKey,"&language=en-US&page=").concat(pageNumber,"&include_adult=false&query=").concat(inputValue)).then(function(e){return e.json()}).then(function(e){return e})}function fetchPopularFilms(){return fetch("https://api.themoviedb.org/3/movie/popular?api_key=".concat(apiKey,"&language=en-US&page=").concat(pageNumber)).then(function(e){return e.json()}).then(function(e){return console.log(e),e})}function activateDetailsPage(t){homePage.classList.add("is-hidden"),searchField.classList.remove("is-hidden");var e=renderedMovies.find(function(e){return e.id===Number(t)});console.log(e),openMovieDetails(e)}function openMovieDetails(e){detailsPreviewImg.setAttribute("src","https://image.tmdb.org/t/p/w500/".concat(e.poster_path)),detailsTitle.textContent=e.title,detailsDescription.textContent=e.overview,detailsPopularuty.innerHTML=e.popularity,detailsOriginalTitle.innerHTML=e.original_title}function removePreloader(){document.querySelector(".loader").classList.add("is-hiden")}function addPreloader(){document.querySelector(".loader").classList.remove("is-hiden")}createStartupMarkup(),searchField.addEventListener("submit",function(e){e.preventDefault(),inputValue=e.currentTarget.elements[0].value,console.log(inputValue),searchField.reset(),createMarkup()}),movieGallery.addEventListener("click",function(e){activateDetailsPage(e.target.dataset.id)}),window.onload=function(){addPreloader(),window.setTimeout(function(){addPreloader(),removePreloader()},500)};